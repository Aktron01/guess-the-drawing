--// Configuration
local WORD_LIST_URL = "https://raw.githubusercontent.com/Aktron01/words/refs/heads/main/ad"
local Remotes = game:GetService("ReplicatedStorage"):WaitForChild("Remotes")

--// Variables
local AllWords = {}
local CurrentPattern = ""
local MaxResults = 10

--// 1. Fetch the word list
print("Downloading word list...")
local success, content = pcall(function() return game:HttpGet(WORD_LIST_URL) end)
if success then
    for word in string.gmatch(content:lower(), "[%a]+") do
        table.insert(AllWords, word)
    end
    print("Loaded " .. #AllWords .. " words!")
else
    warn("Failed to download word list.")
end

--// 2. Custom UI System (No Library)
local ScreenGui = Instance.new("ScreenGui", game:GetService("CoreGui"))
ScreenGui.Name = "WordSolverUI"

local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 250, 0, 350)
MainFrame.Position = UDim2.new(0.5, -125, 0.5, -175)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.BorderSizePixel = 0

local UICorner = Instance.new("UICorner", MainFrame)
local UIStroke = Instance.new("UIStroke", MainFrame)
UIStroke.Color = Color3.fromRGB(60, 60, 60)
UIStroke.Thickness = 2

local Title = Instance.new("TextLabel", MainFrame)
Title.Size = UDim2.new(1, 0, 0, 40)
Title.Text = "WORD SOLVER"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18

local Container = Instance.new("ScrollingFrame", MainFrame)
Container.Size = UDim2.new(1, -20, 1, -60)
Container.Position = UDim2.new(0, 10, 0, 50)
Container.BackgroundTransparency = 1
Container.CanvasSize = UDim2.new(0, 0, 0, 0)
Container.ScrollBarThickness = 2
Container.AutomaticCanvasSize = Enum.AutomaticSize.Y

local Layout = Instance.new("UIListLayout", Container)
Layout.Padding = UDim.new(0, 5)

--// 3. Logic: Match the captured word to the list
local function updateSolver(captured)
    -- Clear previous results
    for _, v in pairs(Container:GetChildren()) do
        if v:IsA("TextButton") then v:Destroy() end
    end

    -- Convert "c _ t" to "c.t" for Lua pattern matching
    local pattern = captured:gsub(" ", ""):gsub("_", "."):lower()
    local count = 0

    for _, word in pairs(AllWords) do
        if #word == #pattern and string.match(word, "^" .. pattern .. "$") then
            count = count + 1
            if count > MaxResults then break end

            local Btn = Instance.new("TextButton", Container)
            Btn.Size = UDim2.new(1, 0, 0, 30)
            Btn.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
            Btn.Text = word
            Btn.TextColor3 = Color3.fromRGB(200, 200, 200)
            Btn.Font = Enum.Font.Gotham
            Btn.TextSize = 14
            Instance.new("UICorner", Btn)

            Btn.MouseButton1Click:Connect(function()
                Remotes.Guess:FireServer(game.Players.LocalPlayer, word)
            end)
        end
    end
end

--// 4. Hook into the Game Remote
Remotes.word.OnClientEvent:Connect(function(receivedWord)
    print("New Word Captured: " .. tostring(receivedWord))
    updateSolver(tostring(receivedWord))
end)
